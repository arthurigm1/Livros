<app-filter (filtrar)="onFiltrar($event)"></app-filter>

<div *ngIf="livros.length > 0; else loading" 
     class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 p-4" 
     [@fadeInList]>

  <div *ngFor="let livro of livros" 
       class="bg-white rounded-lg shadow-lg p-4 hover:shadow-2xl transition-shadow duration-300">
    
    <!-- Imagem do Livro com Estrela no Canto Superior Direito -->
    <div class="relative">
      <img src="https://m.media-amazon.com/images/I/918C7lDsw5L._AC_UF1000,1000_QL80_.jpg" 
           alt="Capa do Livro" 
           class="w-full h-40 object-contain rounded-md mb-4">

      <!-- Estrela no canto superior direito -->
      <button (click)="favoritarLivro(livro)" 
              [ngClass]="{'text-red-500': livro.favorito, 'text-gray-500': !livro.favorito}" 
              class="absolute top-2 right-2 transition-colors duration-200">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" 
             [attr.fill]="livro.favorito ? 'red' : 'none'" 
             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" 
                d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
        </svg>
      </button>
    </div>

    <h3 class="text-xl font-semibold text-gray-800">{{ livro.titulo }}</h3>
    <p class="text-gray-600 text-sm"><strong>Autor:</strong> {{ livro.autor?.nome || 'Autor não Cadastrado' }}</p>
    <p class="text-gray-600 text-sm"><strong>Ano de Publicação:</strong> {{ livro.dataPublicacao }}</p>
    <p class="text-gray-600 text-sm"><strong>ISBN:</strong> {{ livro.isbn }}</p>
    <p class="text-gray-800 font-bold mt-2"><strong>Preço:</strong> R$ {{ livro.preco | number: '1.2-2' }}</p>
    
    <div class="flex gap-2 mt-4">
      <button class="flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition-colors duration-200">
        Comprar
      </button>

      <button (click)="adicionarLivroAoCarrinho(livro.id)" 
              class="flex items-center justify-center bg-green-500 text-white p-2 rounded-lg hover:bg-green-600 transition-colors duration-200">
            <img src="assets/img/cart.png" alt="Carrinho" class="w-6 h-6" />
      </button>
    </div>



  </div>
</div>

<ng-template #loading>
  <div class="text-center text-gray-500">
    <div class="animate-pulse space-y-4">
      <div class="w-3/4 h-6 bg-gray-300 rounded"></div>
      <div class="w-1/2 h-6 bg-gray-300 rounded"></div>
      <div class="w-3/4 h-6 bg-gray-300 rounded"></div>
    </div>
    <p>Carregando livros...</p>
  </div>
</ng-template>
