<div class="w-full min-h-screen bg-gray-100 p-8">
  <h1 class="text-3xl font-bold text-gray-900 mb-6">
    Gerenciamento de Autores
  </h1>

  <div class="flex justify-end mb-6">
    <button
      (click)="abrirModal()"
      class="bg-gray-800 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-200 cursor-pointer"
    >
      Adicionar Novo Autor
    </button>
  </div>

  <div class="overflow-x-auto mt-8 shadow-lg rounded-lg">
    <table class="w-full table-auto border-separate border-spacing-0">
      <thead class="bg-gray-800 text-white">
        <tr>
          <th
            class="px-6 py-3 text-center text-base font-semibold text-white uppercase tracking-wider"
          >
            ID
          </th>
          <th
            class="px-6 py-3 text-left text-base font-semibold text-white uppercase tracking-wider"
          >
            Livros
          </th>
          <th
            class="px-6 py-3 text-left text-base font-semibold text-white uppercase tracking-wider"
          >
            Imagem
          </th>
          <th
            class="px-6 py-3 text-left text-base font-semibold text-white uppercase tracking-wider"
          >
            Nome
          </th>
          <th
            class="px-6 py-3 text-left text-base font-semibold text-white uppercase tracking-wider"
          >
            Nacionalidade
          </th>
          <th
            class="px-6 py-3 text-left text-base font-semibold text-white uppercase tracking-wider"
          >
            Nascimento
          </th>
          <th
            class="px-6 py-3 text-left text-base font-semibold text-white uppercase tracking-wider"
          >
            Descrição
          </th>
          <th
            class="px-6 py-3 text-center text-base font-semibold text-white uppercase tracking-wider"
          >
            Ações
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let autor of autores" class="border-b">
          <td class="p-4">{{ autor.id }}</td>
          <td class="p-4">{{ autor.quantidadeLivros }}</td>
          <td class="p-4">
            <img
              [src]="autor.img"
              alt="{{ autor.nome }}"
              class="w-16 h-16 rounded-md object-cover"
            />
          </td>
          <td class="p-4">{{ autor.nome }}</td>
          <td class="p-4">{{ autor.nacionalidade }}</td>
          <td class="p-4">{{ autor.dataNascimento | date : "dd/MM/yyyy" }}</td>
          <td class="p-4 truncate max-w-xs">{{ autor.descricao }}</td>
          <td class="p-1 flex justify-center space-x-2">
            <button
              (click)="abrirModalEditar(autor)"
              class="px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition duration-200 flex items-center cursor-pointer"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 mr-2"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"
                />
              </svg>
              Atualizar
            </button>
            <button
              (click)="excluirAutor(autor.id)"
              class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition duration-200 flex items-center cursor-pointer"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 mr-2"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
                  clip-rule="evenodd"
                />
              </svg>
              Excluir
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div
  *ngIf="mostrarModal"
  class="fixed inset-0 bg-opacity-40 backdrop-blur-md flex items-center justify-center"
>
  <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-md">
    <h2 class="text-2xl font-bold mb-4">Adicionar Novo Autor</h2>

    <label class="block mb-2">Nome:</label>
    <input
      type="text"
      [(ngModel)]="novoAutor.nome"
      class="w-full p-2 border rounded-md mb-4"
    />

    <label class="block mb-2">Data de Nascimento:</label>
    <input
      type="date"
      [(ngModel)]="novoAutor.dataNascimento"
      class="w-full p-2 border rounded-md mb-4"
    />

    <label class="block mb-2">Nacionalidade:</label>
    <input
      type="text"
      [(ngModel)]="novoAutor.nacionalidade"
      class="w-full p-2 border rounded-md mb-4"
    />

    <label class="block mb-2">Descrição:</label>
    <textarea
      [(ngModel)]="novoAutor.descricao"
      class="w-full p-2 border rounded-md mb-4"
    ></textarea>

    <label class="block mb-2">Imagem (URL):</label>
    <input
      type="text"
      [(ngModel)]="novoAutor.img"
      class="w-full p-2 border rounded-md mb-4"
    />

    <div class="flex justify-end space-x-2">
      <button
        (click)="fecharModal()"
        class="bg-gray-500 hover:bg-gray-700 text-white py-2 px-4 rounded cursor-pointer"
      >
        Cancelar
      </button>
      <button
        (click)="salvarNovoAutor()"
        class="bg-green-500 hover:bg-green-700 text-white py-2 px-4 rounded cursor-pointer"
      >
        Salvar
      </button>
    </div>
  </div>
</div>

<div
  *ngIf="mostrarModalEditar"
  class="fixed inset-0 bg-opacity-40 backdrop-blur-md flex items-center justify-center"
>
  <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-md">
    <h2 class="text-2xl font-bold mb-4">Editar Autor</h2>

    <label class="block mb-2">Nome:</label>
    <input
      type="text"
      [(ngModel)]="autorEditado.nome"
      class="w-full p-2 border rounded-md mb-4"
    />

    <label class="block mb-2">Data de Nascimento:</label>
    <input
      type="date"
      [(ngModel)]="autorEditado.dataNascimento"
      class="w-full p-2 border rounded-md mb-4"
    />

    <label class="block mb-2">Nacionalidade:</label>
    <input
      type="text"
      [(ngModel)]="autorEditado.nacionalidade"
      class="w-full p-2 border rounded-md mb-4"
    />

    <label class="block mb-2">Descrição:</label>
    <textarea
      [(ngModel)]="autorEditado.descricao"
      class="w-full p-2 border rounded-md mb-4"
    ></textarea>

    <label class="block mb-2">Imagem (URL):</label>
    <input
      type="text"
      [(ngModel)]="autorEditado.img"
      class="w-full p-2 border rounded-md mb-4"
    />

    <div class="flex justify-end space-x-2">
      <button
        (click)="fecharModalEditar()"
        class="bg-gray-500 hover:bg-gray-700 text-white py-2 px-4 rounded"
      >
        Cancelar
      </button>
      <button
        (click)="salvarEdicaoAutor()"
        class="bg-green-500 hover:bg-green-700 text-white py-2 px-4 rounded"
      >
        Salvar
      </button>
    </div>
  </div>
</div>
